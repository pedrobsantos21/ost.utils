% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/infosiga.R
\name{clean_infosiga}
\alias{clean_infosiga}
\title{Clean and Standardize Raw Infosiga Data}
\usage{
clean_infosiga(df_infosiga, file_type = c("sinistros", "pessoas", "veiculos"))
}
\arguments{
\item{df_infosiga}{A raw data frame as loaded by \code{load_infosiga()}.}

\item{file_type}{A string indicating the type of data to be cleaned. Must be
one of \code{'sinistros'}, \code{'pessoas'}, or \code{'veiculos'}.}
}
\value{
A cleaned and processed \code{tibble} with standardized columns and types.
}
\description{
This function processes a raw data frame from Infosiga, applying specific
cleaning and transformation rules based on the type of data (\code{sinistros},
\code{pessoas}, or \code{veiculos}).
}
\details{
The function performs a series of data cleaning tasks, including:
\itemize{
\item \strong{Standardizing categorical variables:} Recodes text values to a
consistent format (e.g., "SINISTRO FATAL" to "Sinistro fatal").
\item \strong{Type conversion:} Converts columns to their appropriate types, such as
dates (\code{lubridate::dmy}), numbers, and factors with ordered levels (e.g.,
age groups).
\item \strong{Handling missing values:} Replaces "NAO DISPONIVEL" strings with \code{NA}.
\item \strong{Joining with external data:} Merges the data with an internal
municipalities dataset (\code{municipios}) to add geographical information like
IBGE codes and administrative regions.
\item \strong{Column renaming and selection:} Renames columns for clarity (e.g.,
\code{ano_fab} to \code{ano_fabricacao}) and selects a final set of relevant
variables, dropping intermediate or raw ones.
}

The specific cleaning pipeline applied depends on the \code{file_type} argument.
}
\examples{
\dontrun{
# First, download and load the data
data_dir <- tempdir()
download_infosiga(destpath = data_dir)
raw_sinistros_df <- load_infosiga(file_type = "sinistros", path = data_dir)

# Clean the 'sinistros' data
cleaned_sinistros_df <- clean_infosiga(raw_sinistros_df, file_type = "sinistros")

# Clean the 'pessoas' data
raw_pessoas_df <- load_infosiga(file_type = "pessoas", path = data_dir)
cleaned_pessoas_df <- clean_infosiga(raw_pessoas_df, file_type = "pessoas")
}
}
